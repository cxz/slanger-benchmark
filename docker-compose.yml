version: '2'
services:
  benchmark:
    build: ./client
    links:
    - slanger
    command: thor --messages 100 --amount 10000 -C 1000  ws://slanger:8080
    depends_on:
      - slanger
  slanger:
    build: ./slanger
    ports:
    - "4567:4567"
    - "8080:8080"
#    volumes:
#    - .:/code
#    - logvolume01:/var/log
    links:
    - redis
    command: slanger --app_key 123 --secret 123 --redis_address redis://redis:6379/0
    depends_on:
      - redis
  redis:
    build:
      context: ./redis
#volumes:
#  logvolume01: {}
